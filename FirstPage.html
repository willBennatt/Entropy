<html>
 	<head>
  		<title> Entropy Calculator </title>
 	</head>
 	<body>
   		<h1> Entropy Calculator </h1>
   		<p> This will calculate the informational entropy
		    in a String of text. Put text into the first
		    box and then click calculate to get the entropy.
                </p>
		<br>
		Enter the string: 
		<br>
		<input type = "text" id = "Text1">
		<br>
		Result:
		<br>
		<input type = "text" id = "txtresult" readonly = "readonly">
		<br>
		<input type = "button" name = "clickbtn" value = "Calculate" onclick = entropy()>
		<script type = "text/javascript">			
			function entropy() {
				var data = document.getElementById("Text1").value;
        data = data.replace(new RegExp(" ", 'g'), "");
        var chars = (data).split('');
        var ints = (function (s) { var a = []; while (s-- > 0)
            a.push(0); return a; })(chars.length);
        for (var i = 0; i < chars.length; i++) {
            ints[i] = (chars[i]).charCodeAt(0);
        }
        ;
        var probMap = ({});
        for (var i = 0; i < ints.length; i++) {
            if (!(function (m, k) { if (m.entries == null)
                m.entries = []; for (var i_1 = 0; i_1 < m.entries.length; i_1++)
                if (m.entries[i_1].key.equals != null && m.entries[i_1].key.equals(k) || m.entries[i_1].key === k) {
                    return true;
                } return false; })(probMap, ints[i])) {
                /* put */ (function (m, k, v) { if (m.entries == null)
                    m.entries = []; for (var i_2 = 0; i_2 < m.entries.length; i_2++)
                    if (m.entries[i_2].key.equals != null && m.entries[i_2].key.equals(k) || m.entries[i_2].key === k) {
                        m.entries[i_2].value = v;
                        return;
                    } m.entries.push({ key: k, value: v, getKey: function () { return this.key; }, getValue: function () { return this.value; } }); })(probMap, ints[i], 1.0 / ints.length);
            }
            else {
                var numerator = (function (m, k) { if (m.entries == null)
                    m.entries = []; for (var i_3 = 0; i_3 < m.entries.length; i_3++)
                    if (m.entries[i_3].key.equals != null && m.entries[i_3].key.equals(k) || m.entries[i_3].key === k) {
                        return m.entries[i_3].value;
                    } return null; })(probMap, ints[i]) * ints.length + 1;
                /* put */ (function (m, k, v) { if (m.entries == null)
                    m.entries = []; for (var i_4 = 0; i_4 < m.entries.length; i_4++)
                    if (m.entries[i_4].key.equals != null && m.entries[i_4].key.equals(k) || m.entries[i_4].key === k) {
                        m.entries[i_4].value = v;
                        return;
                    } m.entries.push({ key: k, value: v, getKey: function () { return this.key; }, getValue: function () { return this.value; } }); })(probMap, ints[i], numerator / ints.length);
            }
        }
        ;
        var entropy = 0.0;
        {
            var array5009 = (function (m) { var r = []; if (m.entries == null)
                m.entries = []; for (var i = 0; i < m.entries.length; i++)
                r.push(m.entries[i].key); return r; })(probMap);
            for (var index5008 = 0; index5008 < array5009.length; index5008++) {
                var i = array5009[index5008];
                {
                    var p = (function (m, k) { if (m.entries == null)
                        m.entries = []; for (var i_5 = 0; i_5 < m.entries.length; i_5++)
                        if (m.entries[i_5].key.equals != null && m.entries[i_5].key.equals(k) || m.entries[i_5].key === k) {
                            return m.entries[i_5].value;
                        } return null; })(probMap, i);
                    entropy -= p * ((function (x) { return Math.log(x) * Math.LOG10E; })(p) / (function (x) { return Math.log(x) * Math.LOG10E; })(2));
                }
            }
        }
	document.getElementById("txtresult").value = entropy;
    }
		</script>   
 	</body>
</html>